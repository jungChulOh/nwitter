(this.webpackJsonpnwitter=this.webpackJsonpnwitter||[]).push([[0],{54:function(e,t,r){},55:function(e,t,r){"use strict";r.r(t);var n=r(3),a=r.n(n),c=r(34),s=r.n(c),i=r(10),l=r(25),o=r(7),u=r(11),d=r.n(u),b=r(17),j=r(21),x=(r(46),r(56),r(57),Object({NODE_ENV:"production",PUBLIC_URL:"/nwitter",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_APP_KEY:"AIzaSyDCg9SZUS91H8XurI6e4KD-9clOD-Vg3l0",REACT_APP_AUTH_DOMAIN:"nwitter-20d4c.firebaseapp.com",REACT_APP_PROJECT_ID:"nwitter-20d4c",REACT_APP_STORAGE_BUCKET:"nwitter-20d4c.appspot.com",REACT_APP_MESSAGEING_SENDER_ID:"1034167393201",REACT_APP_APP_ID:"1:1034167393201:web:fd8673fd55ed7af12cbb90"})),h={apiKey:x.REACT_APP_APP_KEY,authDomain:x.REACT_APP_AUTH_DOMAIN,projectId:x.REACT_APP_PROJECT_ID,storageBucket:x.REACT_APP_STORAGE_BUCKET,messagingSenderId:x.REACT_APP_MESSAGEING_SENDER_ID,appId:x.REACT_APP_APP_ID};j.a.initializeApp(h);var f=j.a,p=j.a.auth(),m=j.a.firestore(),O=j.a.storage(),g=r(58),w=r(27),v=r(26),N=r(2),y=function(e){var t=e.userObj,r=e.refreshUser,a=Object(o.f)(),c=Object(n.useState)((function(){return t.displayName?t.displayName:"No NickName"})),s=Object(i.a)(c,2),l=s[0],u=s[1],j=Object(n.useState)(t.photoURL),x=Object(i.a)(j,2),h=x[0],f=x[1],y=Object(n.useRef)(null),P=function(){var e=Object(b.a)(d.a.mark((function e(n){var a,c,s,i,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),a="",c={},t.photoURL===h){e.next=16;break}return s=O.refFromURL(t.photoURL),e.next=7,s.delete().then((function(e){return console.log})).catch((function(e){return console.log}));case 7:if(!h){e.next=15;break}return i=O.ref().child("user/".concat(t.uid,"/profile/").concat(Object(g.a)())),e.next=11,i.putString(h,"data_url");case 11:return o=e.sent,e.next=14,o.ref.getDownloadURL();case 14:a=e.sent;case 15:c.photoURL=a;case 16:return t.displayName!==l&&(c.displayName=l),e.next=19,t.updateProfile(c);case 19:return r(),e.next=22,m.collection("nweets").where("createId","==",t.uid).get();case 22:e.sent.docs.map((function(e){return e.ref.update(c)}));case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(N.jsxs)("div",{className:"px-3 w-full lg:w-4/5 flex flex-col items-center",children:[Object(N.jsxs)("div",{className:"border p-5 rounded-md shadow-lg my-5 flex flex-col items-center",children:[h?Object(N.jsx)("img",{src:h,alt:"Profile",width:"100px",height:"100px",className:"rounded-full my-4"}):Object(N.jsx)(v.a,{size:"100px"}),Object(N.jsxs)("label",{htmlFor:"photoFile",className:"w-full my-2 block p-3 border border-dashed hover:text-white hover:bg-gray-400 text-center",children:[Object(N.jsx)(w.a,{size:"25px",className:"inline"})," \ud504\ub85c\ud544 \uc0ac\uc9c4 \ubcc0\uacbd\ud558\uae30"]}),Object(N.jsx)("input",{ref:y,type:"file",name:"photoFile",id:"photoFile",accept:"image/*",onChange:function(e){var t=e.target.files[0];if(t){var r=new FileReader;r.onloadend=function(e){return f(e.target.result)},r.readAsDataURL(t)}else f("")},className:"hidden"}),Object(N.jsx)("form",{onSubmit:P,children:Object(N.jsxs)("div",{className:"mb-2 h-10 border flex justify-between rounded",children:[Object(N.jsx)("input",{type:"text",placeholder:"Update Your Display Name!",value:l,onChange:function(e){var t=e.target.value;u(t)},className:"p-2 w-10/12 h-full text-gray-400 focus:border-blue-700 focus:shadow-xl focus:text-gray-700 flex-auto rounded rounded-r-none"}),Object(N.jsx)("input",{type:"submit",value:"Update Profile",className:"p-2 font-bold text-white bg-blue-500 hover:bg-blue-600 flex-auto rounded rounded-l-none"})]})})]}),Object(N.jsx)("div",{className:"px-3 w-full lg:w-4/5 text-center",children:Object(N.jsx)("button",{onClick:function(){p.signOut(),a.push("/")},className:"px-6 py-3 bg-red-400 text-white hover:bg-red-500 rounded",children:"Log Out"})})]})},P=r(28),A=r(20),R=function(e){var t=e.children,r=Object(n.useState)({email:"",password:""}),a=Object(i.a)(r,2),c=a[0],s=a[1],l=Object(n.useState)(null),o=Object(i.a)(l,2),u=o[0],j=o[1],x=Object(n.useState)(!0),h=Object(i.a)(x,2),f=h[0],m=h[1],O=function(e){var t=e.target,r=t.name,n=t.value;s(Object(A.a)(Object(A.a)({},c),{},Object(P.a)({},r,n)))},g=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!f){e.next=7;break}return e.next=5,p.createUserWithEmailAndPassword(c.email,c.password);case 5:e.next=9;break;case 7:return e.next=9,p.signInWithEmailAndPassword(c.email,c.password);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),j(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsxs)("div",{className:"border rounded sm:w-full md:w-4/12 flex flex-col",children:[Object(N.jsxs)("header",{className:"bg-gray-100 rounded-b p-5",children:[Object(N.jsx)("div",{className:"text-center mb-3",children:Object(N.jsx)("h1",{className:"text-blue-400 font-bold",children:"Welcome to Nwitter!"})}),t]}),Object(N.jsxs)("form",{onSubmit:g,className:"flex flex-col mt-2 p-5",children:[Object(N.jsx)("input",{type:"email",placeholder:"Email",name:"email",required:!0,value:c.email,onChange:O,className:"border p-3 text-gray-500 focus:text-gray-900 focus:border-blue-200 focus:shadow-lg mb-2 rounded"}),Object(N.jsx)("input",{type:"password",placeholder:"Password",name:"password",required:!0,value:c.password,onChange:O,className:"border p-3 text-gray-500 focus:text-gray-900 focus:border-blue-200 focus:shadow-lg mb-2 rounded"}),Object(N.jsx)("input",{type:"submit",value:f?"Create Account":"Login",className:"border py-3 px-4 bg-green-400 text-white font-bold rounded cursor-pointer hover:shadow hover:bg-green-600"})]}),u&&Object(N.jsx)("div",{className:"px-5 mb-4",children:Object(N.jsx)("p",{className:"p-3 bg-red-400 text-white rounded shadow",children:u})})]}),Object(N.jsx)("div",{className:"text-right mt-2",children:Object(N.jsx)("span",{onClick:function(){return m((function(e){return!e}))},className:"text-blue-400 hover:text-blue-500 cursor-pointer",children:f?"Sign In":"Create Account"})})]})},_=r(24),C=function(){var e=function(){var e=Object(b.a)(d.a.mark((function e(t){var r,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"google"===(r=t.target.name)?n=new f.auth.GoogleAuthProvider:"github"===r&&(n=new f.auth.GithubAuthProvider),e.next=4,p.signInWithPopup(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t=function(){return Object(N.jsxs)("div",{className:"flex flex-col",children:[Object(N.jsxs)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold rounded border hover:shadow py-3 px-4 mb-2",onClick:e,name:"google",children:[Object(N.jsx)(_.b,{className:"inline mr-3",size:"20px"})," Continue with Google"]}),Object(N.jsxs)("button",{className:"bg-white hover:bg-gray-400 hover:text-white font-bold rounded border hover:shadow py-3 px-4 mb-2",onClick:e,name:"github",children:[Object(N.jsx)(_.a,{className:"inline mr-3",size:"20px"})," Continue with Github"]})]})};return Object(N.jsx)("div",{className:"container w-full h-screen flex flex-col items-center justify-center",children:Object(N.jsx)(R,{children:Object(N.jsx)(t,{})})})},E=r(32),S=function(e){var t=e.nweetObj,r=e.isOwner,a=Object(n.useState)(!1),c=Object(i.a)(a,2),s=c[0],l=c[1],o=Object(n.useState)(t.text),u=Object(i.a)(o,2),j=u[0],x=u[1],h=function(){var e=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure Delete Nweet?")){e.next=6;break}return e.next=4,m.doc("nweets/".concat(t.id)).delete();case 4:return e.next=6,O.refFromURL(t.attachmentURL).delete();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){return l((function(e){return!e}))},p=function(){var e=Object(b.a)(d.a.mark((function e(r){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.next=3,m.doc("nweets/".concat(t.id)).update({text:j});case 3:l(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(N.jsxs)("div",{className:"inline-block border rounded mb-5 lg:w-3/6 md:w-10/12 w-10/12",children:[t.attachmentURL?Object(N.jsx)("img",{src:t.attachmentURL,alt:"...",width:"100%"}):Object(N.jsx)("div",{className:"w-screen h-3"}),s?Object(N.jsx)(N.Fragment,{children:Object(N.jsxs)("form",{onSubmit:p,className:"px-5",children:[Object(N.jsxs)("div",{className:"text-right mt-2",children:[Object(N.jsx)("input",{type:"submit",value:"Edit Nweet",className:"px-2 py-1 mr-2 bg-blue-400 hover:bg-blue-500 text-white rounded"}),Object(N.jsx)("button",{onClick:f,className:"px-2 py-1 bg-red-400 text-white hover:bg-red-500 rounded",children:"Cancel"})]}),Object(N.jsx)("input",{type:"text",placeholder:"Edit is Nweet",value:j,onChange:function(e){var t=e.target.value;x(t)},className:"w-full my-2 border rounded p-3 text-gray-500 focus:text-gray-800 focus:shadow-lg"})]})}):Object(N.jsxs)("div",{className:"px-5 text-gray-600",children:[Object(N.jsxs)("div",{className:"flex justify-between items-center mt-2",children:[Object(N.jsxs)("div",{className:"flex justify-center items-center",children:[t.photoURL?Object(N.jsx)("img",{src:t.photoURL,alt:"profile",width:"50px",height:"50px",className:"rounded-full inline mr-2"}):Object(N.jsx)(v.a,{size:"50px",className:"mr-2"}),Object(N.jsx)("span",{className:"text-gray-400",children:t.displayName?t.displayName:"No NickName"})]}),r&&Object(N.jsxs)("div",{children:[Object(N.jsx)("button",{onClick:f,className:"hover:text-gray-400 p-2 mr-1",children:Object(N.jsx)(E.b,{size:"25px"})}),Object(N.jsx)("button",{onClick:h,className:"hover:text-gray-400 p-2",children:Object(N.jsx)(E.a,{size:"25px"})})]})]}),Object(N.jsx)("h4",{className:"my-4",children:t.text})]})]})},U=function(e){var t=e.userObj,r=Object(n.useState)(""),a=Object(i.a)(r,2),c=a[0],s=a[1],l=Object(n.useState)(""),o=Object(i.a)(l,2),u=o[0],j=o[1],x=Object(n.useRef)(),h=Object(n.useRef)(),f=function(){var e=Object(b.a)(d.a.mark((function e(r){var n,a,i,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),n="",c){e.next=6;break}return alert("\uc0dd\uac01\uc744 \uba3c\uc800 \uc785\ub825\ud574 \uc8fc\uc138\uc694."),x.current.focus(),e.abrupt("return");case 6:if(""===u){e.next=14;break}return a=O.ref().child("".concat(t.uid,"/").concat(Object(g.a)())),e.next=10,a.putString(u,"data_url");case 10:return i=e.sent,e.next=13,i.ref.getDownloadURL();case 13:n=e.sent;case 14:return l={text:c,createDt:Date.now(),createId:t.uid,displayName:t.displayName,photoURL:t.photoURL,attachmentURL:n},e.next=17,m.collection("nweets").add(l).then((function(e){s(""),j(""),h.current.value=""})).catch((function(e){console.log(e)}));case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(e){var t=e.target,r=t.type,n=t.value,a=t.files;if("text"!==r)if("file"!==r);else{var c=a[0];if(c){var i=new FileReader;i.onloadend=function(e){return j(e.target.result)},i.readAsDataURL(c)}else j("")}else s(n)};return Object(N.jsxs)("form",{onSubmit:f,children:[u&&Object(N.jsxs)("div",{className:"mb-2 relative flex justify-center",children:[Object(N.jsx)("img",{src:u,alt:"...",className:"w-80 h-48"}),Object(N.jsx)("div",{className:"absolute right-0",children:Object(N.jsx)("button",{onClick:function(){j(""),h.current.value=""},className:"py-2 px-4 text-white bg-red-500 hover:bg-red-600 font-bold rounded",children:"Clear"})})]}),Object(N.jsxs)("div",{className:"mb-2 h-10 border flex justify-between rounded",children:[Object(N.jsx)("input",{type:"text",name:"nwitte",ref:x,placeholder:"\uc9c0\uae08 \ub2f9\uc2e0\uc758 \uc0dd\uac01\uc740 \uc5b4\ub5bb\uc2b5\ub2c8\uae4c?",value:c,onChange:p,maxLength:120,className:"p-2 w-10/12 h-full text-gray-400 focus:border-blue-700 focus:shadow-xl focus:text-gray-700 flex-auto rounded rounded-r-none"}),Object(N.jsx)("input",{type:"submit",value:"Nwitte",className:"p-2 font-bold text-white bg-blue-500 hover:bg-blue-600 flex-auto rounded rounded-l-none"})]}),Object(N.jsxs)("label",{htmlFor:"nwitteFile",className:"block p-3 border border-dashed hover:text-white hover:bg-gray-400 text-center",children:[Object(N.jsx)(w.a,{size:"25px",className:"inline"})," \uc0ac\uc9c4 \uc62c\ub9ac\uae30"]}),Object(N.jsx)("input",{ref:h,type:"file",name:"nwitteFile",id:"nwitteFile",accept:"image/*",onChange:p,className:"hidden"})]})},D=function(e){var t=e.userObj,r=Object(n.useState)([]),a=Object(i.a)(r,2),c=a[0],s=a[1];return Object(n.useEffect)((function(){m.collection("nweets").orderBy("createDt","desc").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(A.a)(Object(A.a)({},e.data()),{},{id:e.id,text:e.data().text})}));s(t)}))}),[]),Object(N.jsxs)("div",{className:"px-3 w-full lg:w-4/5",children:[Object(N.jsx)("div",{className:"border p-5 rounded-md shadow-lg my-5",children:Object(N.jsx)(U,{userObj:t})}),Object(N.jsx)("div",{className:"w-full flex flex-col items-center",children:c&&c.map((function(e){return Object(N.jsx)(S,{nweetObj:e,isOwner:e.createId===t.uid},e.id)}))})]})},k=r(36),L=function(){return Object(N.jsx)("div",{className:"flex justify-center p-5 border-b shadow fixed w-full bg-white z-30",children:Object(N.jsx)("nav",{className:"w-5/12",children:Object(N.jsxs)("ul",{className:"flex justify-around",children:[Object(N.jsx)("li",{children:Object(N.jsx)(l.b,{to:"/",className:"hover:text-gray-500",children:Object(N.jsxs)("div",{className:"flex flex-col justify-center items-center",children:[Object(N.jsx)(_.c,{size:"25px"}),Object(N.jsx)("span",{children:"Home"})]})})}),Object(N.jsx)("li",{children:Object(N.jsx)(l.b,{to:"/profile",className:"hover:text-gray-500",children:Object(N.jsxs)("div",{className:"flex flex-col justify-center items-center",children:[Object(N.jsx)(k.a,{size:"25px"}),Object(N.jsx)("span",{children:"Profile"})]})})})]})})})},T=function(e){var t=e.isLoggedIn,r=e.userObj,n=e.refreshUser;return Object(N.jsxs)(l.a,{children:[t&&Object(N.jsx)(L,{userObj:r}),Object(N.jsx)(o.c,{children:t?Object(N.jsxs)("div",{className:"container pt-28 flex justify-center",children:[Object(N.jsx)(o.a,{exact:!0,path:"/",children:Object(N.jsx)(D,{userObj:r})}),Object(N.jsx)(o.a,{exact:!0,path:"/profile",children:Object(N.jsx)(y,{userObj:r,refreshUser:n})})]}):Object(N.jsx)(o.a,{exact:!0,path:"/",children:Object(N.jsx)(C,{})})})]})},I=r(37);var F=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),r=t[0],a=t[1],c=Object(n.useState)(null),s=Object(i.a)(c,2),l=s[0],o=s[1];return Object(n.useEffect)((function(){p.onAuthStateChanged((function(e){o(e?{displayName:e.displayName,uid:e.uid,photoURL:e.photoURL,updateProfile:function(t){return e.updateProfile(t)}}:null),a(!0)}))}),[]),Object(N.jsxs)(N.Fragment,{children:[Object(N.jsxs)(I.a,{children:[Object(N.jsx)("title",{children:"Jung Nwitter"}),Object(N.jsx)("meta",{name:"description",content:"Twitter\ub97c clone \ucf54\ub529 \ud574\ubcf4\uc790!"})]}),r?Object(N.jsx)(T,{isLoggedIn:Boolean(l),userObj:l,refreshUser:function(){var e=p.currentUser;o({displayName:e.displayName,uid:e.uid,photoURL:e.photoURL,updateProfile:function(t){return e.updateProfile(t)}})}}):Object(N.jsx)("div",{children:"Loading..."})]})};r(54);s.a.render(Object(N.jsx)(a.a.StrictMode,{children:Object(N.jsx)(F,{})}),document.getElementById("root"))}},[[55,1,2]]]);
//# sourceMappingURL=main.01da8fda.chunk.js.map