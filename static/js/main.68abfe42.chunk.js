(this.webpackJsonpnwitter=this.webpackJsonpnwitter||[]).push([[0],{49:function(e,t,r){},50:function(e,t,r){"use strict";r.r(t);var n=r(3),a=r.n(n),c=r(33),s=r.n(c),i=r(9),l=r(23),o=r(6),u=r(10),d=r.n(u),b=r(16),j=r(20),x=(r(41),r(51),r(52),Object({NODE_ENV:"production",PUBLIC_URL:"/nwitter",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_APP_KEY:"AIzaSyDCg9SZUS91H8XurI6e4KD-9clOD-Vg3l0",REACT_APP_AUTH_DOMAIN:"nwitter-20d4c.firebaseapp.com",REACT_APP_PROJECT_ID:"nwitter-20d4c",REACT_APP_STORAGE_BUCKET:"nwitter-20d4c.appspot.com",REACT_APP_MESSAGEING_SENDER_ID:"1034167393201",REACT_APP_APP_ID:"1:1034167393201:web:fd8673fd55ed7af12cbb90"})),h={apiKey:x.REACT_APP_APP_KEY,authDomain:x.REACT_APP_AUTH_DOMAIN,projectId:x.REACT_APP_PROJECT_ID,storageBucket:x.REACT_APP_STORAGE_BUCKET,messagingSenderId:x.REACT_APP_MESSAGEING_SENDER_ID,appId:x.REACT_APP_APP_ID};j.a.initializeApp(h);var f=j.a,p=j.a.auth(),m=j.a.firestore(),O=j.a.storage(),g=r(25),v=r(2),w=function(e){var t=e.userObj,r=e.refreshUser,a=Object(o.f)(),c=Object(n.useState)(t.displayName),s=Object(i.a)(c,2),l=s[0],u=s[1],j=Object(n.useState)(t.photoURL),x=Object(i.a)(j,2),h=x[0],f=(x[1],function(){var e=Object(b.a)(d.a.mark((function e(n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),t.displayName===l){e.next=4;break}return e.next=4,t.updateProfile({displayName:l});case 4:r();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());return Object(v.jsxs)("div",{className:"px-3 w-full lg:w-4/5 flex flex-col items-center",children:[Object(v.jsxs)("div",{className:"border p-5 rounded-md shadow-lg my-5 flex flex-col items-center",children:[Object(v.jsx)("img",{src:h,alt:"Profile",className:"rounded-full my-4"}),Object(v.jsxs)("label",{htmlFor:"nwitteFile",className:"w-full my-2 block p-3 border border-dashed hover:text-white hover:bg-gray-400 text-center",children:[Object(v.jsx)(g.a,{size:"25px",className:"inline"})," \ud504\ub85c\ud544 \uc0ac\uc9c4 \ubcc0\uacbd\ud558\uae30"]}),Object(v.jsx)("form",{onSubmit:f,children:Object(v.jsxs)("div",{className:"mb-2 h-10 border flex justify-between rounded",children:[Object(v.jsx)("input",{type:"text",placeholder:"Update Your Display Name!",value:l,onChange:function(e){var t=e.target.value;u(t)},className:"p-2 w-10/12 h-full text-gray-400 focus:border-blue-700 focus:shadow-xl focus:text-gray-700 flex-auto rounded rounded-r-none"}),Object(v.jsx)("input",{type:"submit",value:"Update Profile",className:"p-2 font-bold text-white bg-blue-500 hover:bg-blue-600 flex-auto rounded rounded-l-none"})]})})]}),Object(v.jsx)("div",{className:"px-3 w-full lg:w-4/5 text-center",children:Object(v.jsx)("button",{onClick:function(){p.signOut(),a.push("/")},className:"px-6 py-3 bg-red-400 text-white hover:bg-red-500 rounded",children:"Log Out"})})]})},N=r(26),y=r(19),P=function(e){var t=e.children,r=Object(n.useState)({email:"",password:""}),a=Object(i.a)(r,2),c=a[0],s=a[1],l=Object(n.useState)(null),o=Object(i.a)(l,2),u=o[0],j=o[1],x=Object(n.useState)(!0),h=Object(i.a)(x,2),f=h[0],m=h[1],O=function(e){var t=e.target,r=t.name,n=t.value;s(Object(y.a)(Object(y.a)({},c),{},Object(N.a)({},r,n)))},g=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!f){e.next=7;break}return e.next=5,p.createUserWithEmailAndPassword(c.email,c.password);case 5:e.next=9;break;case 7:return e.next=9,p.signInWithEmailAndPassword(c.email,c.password);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),j(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"border rounded sm:w-full md:w-4/12 flex flex-col",children:[Object(v.jsxs)("header",{className:"bg-gray-100 rounded-b p-5",children:[Object(v.jsx)("div",{className:"text-center mb-3",children:Object(v.jsx)("h1",{className:"text-blue-400 font-bold",children:"Welcome to Nwitter!"})}),t]}),Object(v.jsxs)("form",{onSubmit:g,className:"flex flex-col mt-2 p-5",children:[Object(v.jsx)("input",{type:"email",placeholder:"Email",name:"email",required:!0,value:c.email,onChange:O,className:"border p-3 text-gray-500 focus:text-gray-900 focus:border-blue-200 focus:shadow-lg mb-2 rounded"}),Object(v.jsx)("input",{type:"password",placeholder:"Password",name:"password",required:!0,value:c.password,onChange:O,className:"border p-3 text-gray-500 focus:text-gray-900 focus:border-blue-200 focus:shadow-lg mb-2 rounded"}),Object(v.jsx)("input",{type:"submit",value:f?"Create Account":"Login",className:"border py-3 px-4 bg-green-400 text-white font-bold rounded cursor-pointer hover:shadow hover:bg-green-600"})]}),u&&Object(v.jsx)("div",{className:"px-5 mb-4",children:Object(v.jsx)("p",{className:"p-3 bg-red-400 text-white rounded shadow",children:u})})]}),Object(v.jsx)("div",{className:"text-right mt-2",children:Object(v.jsx)("span",{onClick:function(){return m((function(e){return!e}))},className:"text-blue-400 hover:text-blue-500 cursor-pointer",children:f?"Sign In":"Create Account"})})]})},A=r(22),_=function(){var e=function(){var e=Object(b.a)(d.a.mark((function e(t){var r,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"google"===(r=t.target.name)?n=new f.auth.GoogleAuthProvider:"github"===r&&(n=new f.auth.GithubAuthProvider),e.next=4,p.signInWithPopup(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t=function(){return Object(v.jsxs)("div",{className:"flex flex-col",children:[Object(v.jsxs)("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold rounded border hover:shadow py-3 px-4 mb-2",onClick:e,name:"google",children:[Object(v.jsx)(A.b,{className:"inline mr-3",size:"20px"})," Continue with Google"]}),Object(v.jsxs)("button",{className:"bg-white hover:bg-gray-400 hover:text-white font-bold rounded border hover:shadow py-3 px-4 mb-2",onClick:e,name:"github",children:[Object(v.jsx)(A.a,{className:"inline mr-3",size:"20px"})," Continue with Github"]})]})};return Object(v.jsx)("div",{className:"container w-full h-screen flex flex-col items-center justify-center",children:Object(v.jsx)(P,{children:Object(v.jsx)(t,{})})})},E=r(31),C=function(e){var t=e.nweetObj,r=e.isOwner,a=Object(n.useState)(!1),c=Object(i.a)(a,2),s=c[0],l=c[1],o=Object(n.useState)(t.text),u=Object(i.a)(o,2),j=u[0],x=u[1],h=function(){var e=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure Delete Nweet?")){e.next=6;break}return e.next=4,m.doc("nweets/".concat(t.id)).delete();case 4:return e.next=6,O.refFromURL(t.attachmentURL).delete();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f=function(){return l((function(e){return!e}))},p=function(){var e=Object(b.a)(d.a.mark((function e(r){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),e.next=3,m.doc("nweets/".concat(t.id)).update({text:j});case 3:l(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(v.jsxs)("div",{className:"inline-block border rounded mb-5 lg:w-3/6 md:w-10/12 w-10/12",children:[t.attachmentURL?Object(v.jsx)("img",{src:t.attachmentURL,alt:"...",width:"100%"}):Object(v.jsx)("div",{className:"w-screen h-3"}),s?Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)("form",{onSubmit:p,className:"px-5",children:[Object(v.jsxs)("div",{className:"text-right mt-2",children:[Object(v.jsx)("input",{type:"submit",value:"Edit Nweet",className:"px-2 py-1 mr-2 bg-blue-400 hover:bg-blue-500 text-white rounded"}),Object(v.jsx)("button",{onClick:f,className:"px-2 py-1 bg-red-400 text-white hover:bg-red-500 rounded",children:"Cancel"})]}),Object(v.jsx)("input",{type:"text",placeholder:"Edit is Nweet",value:j,onChange:function(e){var t=e.target.value;x(t)},className:"w-full my-2 border rounded p-3 text-gray-500 focus:text-gray-800 focus:shadow-lg"})]})}):Object(v.jsxs)("div",{className:"px-5 text-gray-600",children:[r&&Object(v.jsxs)("div",{className:"flex justify-between items-center mt-2",children:[Object(v.jsxs)("div",{className:"flex justify-center items-center",children:[Object(v.jsx)("img",{src:t.photoURL,alt:"profile",width:"50px",height:"50px",className:"rounded-full inline mr-2"}),Object(v.jsx)("span",{className:"text-gray-400",children:t.displayName})]}),Object(v.jsxs)("div",{children:[Object(v.jsx)("button",{onClick:f,className:"hover:text-gray-400 p-2 mr-1",children:Object(v.jsx)(E.b,{size:"25px"})}),Object(v.jsx)("button",{onClick:h,className:"hover:text-gray-400 p-2",children:Object(v.jsx)(E.a,{size:"25px"})})]})]}),Object(v.jsx)("h4",{className:"my-4",children:t.text})]})]})},S=r(54),R=function(e){var t=e.userObj,r=Object(n.useState)(""),a=Object(i.a)(r,2),c=a[0],s=a[1],l=Object(n.useState)(""),o=Object(i.a)(l,2),u=o[0],j=o[1],x=Object(n.useRef)(),h=Object(n.useRef)(),f=function(){var e=Object(b.a)(d.a.mark((function e(r){var n,a,i,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),n="",c){e.next=6;break}return alert("\uc0dd\uac01\uc744 \uba3c\uc800 \uc785\ub825\ud574 \uc8fc\uc138\uc694."),x.current.focus(),e.abrupt("return");case 6:if(""===u){e.next=14;break}return a=O.ref().child("".concat(t.uid,"/").concat(Object(S.a)())),e.next=10,a.putString(u,"data_url");case 10:return i=e.sent,e.next=13,i.ref.getDownloadURL();case 13:n=e.sent;case 14:return l={text:c,createDt:Date.now(),createId:t.uid,displayName:t.displayName,photoURL:t.photoURL,attachmentURL:n},e.next=17,m.collection("nweets").add(l).then((function(e){s(""),j(""),h.current.value=""})).catch((function(e){console.log(e)}));case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(e){var t=e.target,r=t.type,n=t.value,a=t.files;if("text"!==r)if("file"!==r);else{var c=a[0];if(c){var i=new FileReader;i.onloadend=function(e){return j(e.target.result)},i.readAsDataURL(c)}else j("")}else s(n)};return Object(v.jsxs)("form",{onSubmit:f,children:[u&&Object(v.jsxs)("div",{className:"mb-2 relative flex justify-center",children:[Object(v.jsx)("img",{src:u,alt:"...",className:"w-80 h-48"}),Object(v.jsx)("div",{className:"absolute right-0",children:Object(v.jsx)("button",{onClick:function(){j(""),h.current.value=""},className:"py-2 px-4 text-white bg-red-500 hover:bg-red-600 font-bold rounded",children:"Clear"})})]}),Object(v.jsxs)("div",{className:"mb-2 h-10 border flex justify-between rounded",children:[Object(v.jsx)("input",{type:"text",name:"nwitte",ref:x,placeholder:"\uc9c0\uae08 \ub2f9\uc2e0\uc758 \uc0dd\uac01\uc740 \uc5b4\ub5bb\uc2b5\ub2c8\uae4c?",value:c,onChange:p,maxLength:120,className:"p-2 w-10/12 h-full text-gray-400 focus:border-blue-700 focus:shadow-xl focus:text-gray-700 flex-auto rounded rounded-r-none"}),Object(v.jsx)("input",{type:"submit",value:"Nwitte",className:"p-2 font-bold text-white bg-blue-500 hover:bg-blue-600 flex-auto rounded rounded-l-none"})]}),Object(v.jsxs)("label",{htmlFor:"nwitteFile",className:"block p-3 border border-dashed hover:text-white hover:bg-gray-400 text-center",children:[Object(v.jsx)(g.a,{size:"25px",className:"inline"})," \uc0ac\uc9c4 \uc62c\ub9ac\uae30"]}),Object(v.jsx)("input",{ref:h,type:"file",name:"nwitteFile",id:"nwitteFile",accept:"image/*",onChange:p,className:"hidden"})]})},U=function(e){var t=e.userObj,r=Object(n.useState)([]),a=Object(i.a)(r,2),c=a[0],s=a[1];return Object(n.useEffect)((function(){m.collection("nweets").orderBy("createDt","desc").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(y.a)(Object(y.a)({},e.data()),{},{id:e.id,text:e.data().text})}));s(t)}))}),[]),Object(v.jsxs)("div",{className:"px-3 w-full lg:w-4/5",children:[Object(v.jsx)("div",{className:"border p-5 rounded-md shadow-lg my-5",children:Object(v.jsx)(R,{userObj:t})}),Object(v.jsx)("div",{className:"w-full flex flex-col items-center",children:c&&c.map((function(e){return Object(v.jsx)(C,{nweetObj:e,isOwner:e.createId===t.uid},e.id)}))})]})},D=r(35),k=function(){return Object(v.jsx)("div",{className:"flex justify-center p-5 border-b shadow fixed w-full bg-white z-30",children:Object(v.jsx)("nav",{className:"w-5/12",children:Object(v.jsxs)("ul",{className:"flex justify-around",children:[Object(v.jsx)("li",{children:Object(v.jsx)(l.b,{to:"/",className:"hover:text-gray-500",children:Object(v.jsxs)("div",{className:"flex flex-col justify-center items-center",children:[Object(v.jsx)(A.c,{size:"25px"}),Object(v.jsx)("span",{children:"Home"})]})})}),Object(v.jsx)("li",{children:Object(v.jsx)(l.b,{to:"/profile",className:"hover:text-gray-500",children:Object(v.jsxs)("div",{className:"flex flex-col justify-center items-center",children:[Object(v.jsx)(D.a,{size:"25px"}),Object(v.jsx)("span",{children:"Profile"})]})})})]})})})},T=function(e){var t=e.isLoggedIn,r=e.userObj,n=e.refreshUser;return Object(v.jsxs)(l.a,{children:[t&&Object(v.jsx)(k,{userObj:r}),Object(v.jsx)("div",{className:"container pt-28 flex justify-center",children:Object(v.jsx)(o.c,{children:t?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(o.a,{exact:!0,path:"/",children:Object(v.jsx)(U,{userObj:r})}),Object(v.jsx)(o.a,{exact:!0,path:"/profile",children:Object(v.jsx)(w,{userObj:r,refreshUser:n})})]}):Object(v.jsx)(o.a,{exact:!0,path:"/",children:Object(v.jsx)(_,{})})})})]})};var I=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),r=t[0],a=t[1],c=Object(n.useState)(null),s=Object(i.a)(c,2),l=s[0],o=s[1];return Object(n.useEffect)((function(){p.onAuthStateChanged((function(e){o(e?{displayName:e.displayName,uid:e.uid,photoURL:e.photoURL,updateProfile:function(t){return e.updateProfile(t)}}:null),a(!0)}))}),[]),Object(v.jsx)(v.Fragment,{children:r?Object(v.jsx)(T,{isLoggedIn:Boolean(l),userObj:l,refreshUser:function(){var e=p.currentUser;o({displayName:e.displayName,uid:e.uid,photoURL:e.photoURL,updateProfile:function(t){return e.updateProfile(t)}})}}):Object(v.jsx)("div",{children:"Loading..."})})};r(49);s.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(I,{})}),document.getElementById("root"))}},[[50,1,2]]]);
//# sourceMappingURL=main.68abfe42.chunk.js.map